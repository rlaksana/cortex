
echo "ğŸ¯ LEVEL 1: Running lightweight pre-commit checks..."

# Check if this is a documentation-only commit
DOCS_ONLY=$(git diff --cached --name-only | grep -E '\.(md|txt|json|yml|yaml)$' | wc -l)
TOTAL_FILES=$(git diff --cached --name-only | wc -l)

# If only documentation files are changed, skip heavy checks
if [ "$DOCS_ONLY" -eq "$TOTAL_FILES" ] && [ "$TOTAL_FILES" -gt 0 ]; then
  echo "ğŸ“ Documentation-only commit detected - running light checks..."

  # Only format docs, no heavy validation
  npx prettier --write $(git diff --cached --name-only | grep -E '\.(md|json|yml|yaml)$') 2>/dev/null || true
  echo "âœ… Documentation formatting completed"
  exit 0
fi

echo "ğŸ”§ Running lint-staged on changed files..."
npx lint-staged || {
  echo "âŒ Lint-staged failed"
  echo "ğŸ’¡ Fix linting and formatting issues before committing"
  echo "   Most issues can be auto-fixed. Stage the fixes and try again."
  exit 1
}

echo "âœ… LEVEL 1 pre-commit checks passed!"
echo "ğŸš€ Ready to commit"
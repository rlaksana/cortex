#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "ğŸ” Running enhanced pre-commit quality gate..."

# Run the enhanced pre-commit quality gate check
node scripts/pre-commit-check.mjs

# Check if the pre-commit check passed
if [ $? -ne 0 ]; then
    echo ""
    echo "ğŸ”§ Pre-commit quality gate failed!"
    echo ""
    echo "ğŸ’¡ To fix and retry:"
    echo "   1. Run: npm run quality-check (quick fix check)"
    echo "   2. Run: npm run quality-gate (full pipeline)"
    echo "   3. Fix the issues shown above"
    echo "   4. Try committing again"
    echo ""
    echo "âŒ Commit blocked by quality gate"
    exit 1
fi

echo ""
echo "ğŸ‰ Pre-commit quality gate passed!"
echo "âœ… Ready to commit with confidence!"

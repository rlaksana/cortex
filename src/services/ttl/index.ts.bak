/**
 * TTL Services Index
 *
 * Central export point for all TTL (Time-To-Live) related services,
 * utilities, and types.
 *
 * Services Included:
 * - TTL Policy Service: Policy management and application
 * - Enhanced Expiry Utils: Advanced expiry calculations with timezone support
 * - TTL Management Service: Bulk operations and lifecycle management
 * - TTL Safety Service: Data loss prevention and validation
 *
 * @author Cortex Team
 * @version 1.0.0
 * @since 2025
 */

// Core Services
export { ttlPolicyService, TTLPolicyService } from './ttl-policy-service.js';
export { enhancedExpiryUtils, EnhancedExpiryUtils } from '../../utils/enhanced-expiry-utils.js';
export { createTTLManagementService, TTLManagementService } from './ttl-management-service.js';
export { ttlSafetyService, TTLSafetyService } from './ttl-safety-service.js';
export { createTTLCronScheduler, TTLCronScheduler } from './ttl-cron-scheduler.js';

// Import for internal use
import { enhancedExpiryUtils } from '../../utils/enhanced-expiry-utils.js';
import { createTTLManagementService } from './ttl-management-service.js';
import { ttlPolicyService } from './ttl-policy-service.js';
import { ttlSafetyService } from './ttl-safety-service.js';

// Type Exports
export type {
  TTLPolicy,
  TTLValidationRule,
  TTLCalculationResult,
  TTLPolicyOptions,
} from './ttl-policy-service.js';

export type {
  TimezoneConfig,
  ExpiryValidationResult,
  ExpiryCalculationOptions,
} from '../../utils/enhanced-expiry-utils.js';

export type {
  TTLOperationResult,
  TTLBulkOperationOptions,
  TTLStatistics,
} from './ttl-management-service.js';

export type {
  SafetyValidationResult,
  SafetyPolicyConfig,
  OperationContext,
} from './ttl-safety-service.js';

export type {
  TTLCronSchedule,
  TTLCronSchedulerConfig,
  TTLJobHistory,
} from './ttl-cron-scheduler.js';

// Factory Functions
export function createTTLSystem(_database: unknown) {
  const managementService = createTTLManagementService(database);

  return {
    policyService: ttlPolicyService,
    expiryUtils: enhancedExpiryUtils,
    managementService,
    safetyService: ttlSafetyService,
  };
}

// Default Configuration
export const DEFAULT_TTL_CONFIG = {
  defaultPolicy: 'default',
  enableSafetyChecks: true,
  enableAuditLogging: true,
  defaultTimezone: 'UTC',
  enableDryRun: false,
  requireConfirmation: true,
};

export { EXPIRY_TIME_MAP } from '../../constants/expiry-times.js';
export type { ExpiryTimeLabel } from '../../constants/expiry-times.js';

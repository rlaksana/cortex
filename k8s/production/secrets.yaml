# ==============================================================================
# CORTEX MEMORY MCP - PRODUCTION SECRETS
# ==============================================================================
# Secrets for production deployment
# IMPORTANT: These are templates - actual secrets should be created using
# kubectl apply -f - or sealed secrets for GitOps workflows

apiVersion: v1
kind: Secret
metadata:
  name: cortex-production-secrets
  namespace: cortex-production
  labels:
    app: cortex-memory-mcp
    component: secrets
    version: v2.0.1
  annotations:
    description: "Production secrets for Cortex Memory MCP"
    managed-by: "manual"
    last-rotated: "2025-11-10"
type: Opaque
data:
  # Authentication Secrets
  # Generate with: openssl rand -base64 32
  JWT_SECRET: "CHANGE_ME_GENERATE_256_BIT_BASE64_KEY"
  MCP_API_KEY: "CHANGE_ME_GENERATE_STRONG_API_KEY"

  # OpenAI API Key
  OPENAI_API_KEY: "CHANGE_ME_WITH_ACTUAL_OPENAI_API_KEY"

  # Redis Password
  REDIS_PASSWORD: "CHANGE_ME_GENERATE_STRONG_REDIS_PASSWORD"

  # Database Credentials
  QDRANT_API_KEY: "CHANGE_ME_IF_QDRANT_REQUIRES_AUTH"

  # Backup Credentials
  AWS_ACCESS_KEY_ID: "CHANGE_ME_WITH_AWS_ACCESS_KEY"
  AWS_SECRET_ACCESS_KEY: "CHANGE_ME_WITH_AWS_SECRET_KEY"

  # SSL/TLS Certificates (if using SSL)
  # tls.crt: "BASE64_ENCODED_CERTIFICATE"
  # tls.key: "BASE64_ENCODED_PRIVATE_KEY"

  # SMTP Credentials (for alerts)
  SMTP_USERNAME: "CHANGE_ME_WITH_SMTP_USERNAME"
  SMTP_PASSWORD: "CHANGE_ME_WITH_SMTP_PASSWORD"

  # Slack Webhook (if using Slack alerts)
  SLACK_WEBHOOK_URL: "CHANGE_ME_WITH_SLACK_WEBHOOK_URL"

---
# TLS Certificate Secret (for HTTPS)
apiVersion: v1
kind: Secret
metadata:
  name: cortex-tls-cert
  namespace: cortex-production
  labels:
    app: cortex-memory-mcp
    component: tls
type: kubernetes.io/tls
data:
  # Replace with actual certificate and key
  tls.crt: "CHANGE_ME_WITH_BASE64_ENCODED_CERTIFICATE"
  tls.key: "CHANGE_ME_WITH_BASE64_ENCODED_PRIVATE_KEY"

---
# Registry Pull Secret (if using private registry)
apiVersion: v1
kind: Secret
metadata:
  name: cortex-registry-secret
  namespace: cortex-production
  labels:
    app: cortex-memory-mcp
    component: registry
type: kubernetes.io/dockerconfigjson
data:
  # Replace with actual registry credentials
  .dockerconfigjson: "CHANGE_ME_WITH_BASE64_ENCODED_DOCKER_CONFIG"

---
# Annotation for manual secret creation
# ==============================================================================
# CREATION INSTRUCTIONS:
#
# 1. Generate secure random values:
#    JWT_SECRET: openssl rand -base64 32
#    MCP_API_KEY: openssl rand -base64 48
#    REDIS_PASSWORD: openssl rand -base64 32
#
# 2. Encode secrets in base64:
#    echo -n "your-secret-value" | base64
#
# 3. Create the secret:
#    kubectl apply -f secrets.yaml
#
# 4. Or create using kubectl directly:
#    kubectl create secret generic cortex-production-secrets \
#      --namespace=cortex-production \
#      --from-literal=JWT_SECRET=$(openssl rand -base64 32) \
#      --from-literal=MCP_API_KEY=$(openssl rand -base64 48) \
#      --from-literal=OPENAI_API_KEY="your-openai-key" \
#      --from-literal=REDIS_PASSWORD=$(openssl rand -base64 32)
#
# 5. For GitOps, consider using Sealed Secrets:
#    kubeseal --format yaml < secrets.yaml > sealed-secrets.yaml
#
# 6. Regularly rotate secrets (recommended: every 90 days)
# ==============================================================================
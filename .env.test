# =============================================================================
# TEST ENVIRONMENT CONFIGURATION - QDRANT ONLY
# =============================================================================
# This configuration uses Qdrant vector database for testing
# PostgreSQL is NO LONGER SUPPORTED

# =============================================================================
# MANDATORY: OPENAI API KEY FOR TESTING
# =============================================================================
OPENAI_API_KEY=test-key-for-testing-only

# =============================================================================
# QDRANT VECTOR DATABASE CONFIGURATION
# =============================================================================
QDRANT_URL=http://localhost:6333
QDRANT_COLLECTION_NAME=cortex-test-memory
QDRANT_TIMEOUT=30000

# =============================================================================
# VECTOR EMBEDDING CONFIGURATION FOR TESTING
# =============================================================================
VECTOR_SIZE=1536  # 1536=text-embedding-3-small, 3072=*-3-large
VECTOR_DISTANCE=Cosine
EMBEDDING_MODEL=text-embedding-3-small
EMBEDDING_BATCH_SIZE=5

# =============================================================================
# SEARCH CONFIGURATION FOR TESTING
# =============================================================================
SEARCH_LIMIT=20
SEARCH_MODE=auto
ENABLE_CACHE=false
CACHE_TTL=300
SIMILARITY_THRESHOLD=0.7

# =============================================================================
# TEST ENVIRONMENT SETTINGS
# =============================================================================
NODE_ENV=test
LOG_LEVEL=error

# =============================================================================
# PERFORMANCE SETTINGS FOR TESTING
# =============================================================================
DB_MAX_CONNECTIONS=5
DB_CONNECTION_TIMEOUT=10000
API_TIMEOUT=15000
RETRY_ATTEMPTS=2

# =============================================================================
# EMFILE PREVENTION SETTINGS - AUTO-GENERATED
# Added by setup-test-environment.ps1 on 2025-10-30
# =============================================================================

# Node.js handle limit optimizations
EMFILE_HANDLES_LIMIT=131072
UV_THREADPOOL_SIZE=16
NODE_OPTIONS=--max-old-space-size=4096 --max-semi-space-size=256 --optimize-for-size --gc-interval=100

# Test performance optimizations
TEST_TIMEOUT=30000
TEST_WORKERS=4
NODE_MAX_SEMI_SPACE_SIZE=256
NODE_MAX_OLD_SPACE_SIZE=4096

# Windows-specific test settings
FORCE_COLOR=1
NO_COLOR=0
DEBUG=test:*

# =============================================================================
# SECURITY SETTINGS FOR TESTING
# =============================================================================
JWT_SECRET=test_jwt_secret_key_32_chars_minimum
ENCRYPTION_KEY=test_encryption_key_32_chars_hex

# =============================================================================
# TEST SCOPE SETTINGS
# =============================================================================
CORTEX_ORG=test-org
CORTEX_PROJECT=test-project
CORTEX_BRANCH=test

# =============================================================================
# MCP SERVER CONFIGURATION FOR TESTING
# =============================================================================
MCP_SERVER_NAME=cortex-test
MCP_SERVER_VERSION=2.0.0-test
MCP_TRANSPORT=stdio
MCP_MAX_BATCH_SIZE=10

# =============================================================================
# CONFIGURATION NOTES
# =============================================================================
# ❌ REMOVED: All PostgreSQL configuration and dependencies
# ✅ SIMPLIFIED: Only Qdrant vector database required for testing
# ✅ CONSISTENT: Same database backend as production (Qdrant)
# =============================================================================
